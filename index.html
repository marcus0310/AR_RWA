<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RWA Supply Chain Finance</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Noto Sans TC', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
input[type="range"] { -webkit-appearance: none; appearance: none; height: 8px; border-radius: 9999px; cursor: pointer; }
input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; border-radius: 50%; background: white; border: 2px solid #0071E3; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
input[type="range"]::-moz-range-thumb { width: 22px; height: 22px; border-radius: 50%; background: white; border: 2px solid #0071E3; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

const T = {
  white: "#FFFFFF",
  bg: "#FBFBFD",
  bgAlt: "#F5F5F7",
  bgWarm: "#FAFAF8",
  text1: "#1D1D1F",
  text2: "#424245",
  text3: "#6E6E73",
  text4: "#86868B",
  text5: "#AEAEB2",
  border: "#E8E8ED",
  borderLight: "#F0F0F5",
  accent: "#0071E3",
  accentHover: "#0077ED",
  accentBg: "#EBF5FF",
  green: "#28CD41",
  greenBg: "#E8FAE8",
  greenText: "#1B7A2E",
  gold: "#BF8A30",
  goldBg: "#FFF8ED",
  goldText: "#8B6914",
  red: "#FF3B30",
  redBg: "#FFF0EF",
  redText: "#C0291F",
  purple: "#AF52DE",
  purpleBg: "#F5ECFC",
  orange: "#FF9500",
  teal: "#5AC8FA",
  shadow: "0 2px 12px rgba(0,0,0,0.04)",
  shadowMd: "0 4px 24px rgba(0,0,0,0.06)",
  shadowLg: "0 8px 40px rgba(0,0,0,0.08)",
  radius: "16px",
  radiusSm: "12px",
  radiusXs: "8px",
};

const ROLES = [
  { id: "supplier", name: "下包廠商", nameEn: "Supplier", color: T.accent, desc: "融資方 — 用應收帳款發行 RWA 代幣" },
  { id: "trader", name: "接單貿易商", nameEn: "Trader", color: T.gold, desc: "次優先投資方 + 貿易商" },
  { id: "investor", name: "外部投資人", nameEn: "Investor", color: T.green, desc: "優先投資方 — 購買優先層級 RWA 代幣" },
  { id: "platform", name: "平台", nameEn: "Platform", color: T.purple, desc: "設計法律和技術架構，管理智能合約" },
  { id: "sales", name: "銷售通路", nameEn: "Sales Channel", color: T.orange, desc: "引薦投資人或接單貿易商" },
  { id: "accountant", name: "會計師事務所", nameEn: "Accounting Firm", color: T.teal, desc: "獨立查核（信用、應收帳款真實性）" },
  { id: "security", name: "資安公司", nameEn: "Security Auditor", color: "#FF2D55", desc: "智能合約審計" },
];

const RISK_LAYERS = [
  { level: 1, name: "會計師查核接單貿易商信用", protection: "接單貿易商無力付款" },
  { level: 2, name: "會計師查核終端客戶信用", protection: "終端客戶無力付款" },
  { level: 3, name: "會計師查核應收帳款真實性", protection: "應收帳款造假" },
  { level: 4, name: "接單貿易商 25% 次優先投資", protection: "外部投資人有緩衝" },
  { level: 5, name: "超額應收帳款（500萬 vs 400萬）", protection: "額外緩衝" },
  { level: 6, name: "智能合約控制資金", protection: "資金被挪用" },
  { level: 7, name: "資安公司審計智能合約", protection: "技術漏洞" },
];

const RECOVERY_SCENARIOS = [
  { amount: 500, rate: "100%", investor: "全額 + 利息", trader: "全額 + 利息", supplier: "全額" },
  { amount: 400, rate: "80%", investor: "全額 + 利息", trader: "全額 + 利息", supplier: "零" },
  { amount: 350, rate: "70%", investor: "全額 + 利息", trader: "部分（50萬）", supplier: "零" },
  { amount: 300, rate: "60%", investor: "全額 + 利息", trader: "零", supplier: "零" },
  { amount: 250, rate: "50%", investor: "部分（250萬）", trader: "零", supplier: "零" },
  { amount: 0, rate: "0%", investor: "零", trader: "零", supplier: "零" },
];

const MOCK_TRANSACTIONS = [
  { id: "RWA-2026-001", supplier: "永豐五金", trader: "接單貿易商 A", amount: 500, financed: 400, status: "active", daysLeft: 45, progress: 50 },
  { id: "RWA-2026-002", supplier: "大成電子", trader: "接單貿易商 B", amount: 380, financed: 300, status: "active", daysLeft: 22, progress: 76 },
  { id: "RWA-2026-003", supplier: "新竹精密", trader: "接單貿易商 A", amount: 620, financed: 500, status: "completed", daysLeft: 0, progress: 100 },
  { id: "RWA-2026-004", supplier: "台中模具", trader: "接單貿易商 C", amount: 450, financed: 360, status: "active", daysLeft: 67, progress: 26 },
  { id: "RWA-2026-005", supplier: "高雄鋼材", trader: "接單貿易商 B", amount: 280, financed: 220, status: "pending", daysLeft: 90, progress: 0 },
  { id: "RWA-2026-006", supplier: "桃園塑膠", trader: "接單貿易商 A", amount: 550, financed: 440, status: "completed", daysLeft: 0, progress: 100 },
];

function AnimatedNumber({ value, prefix = "", suffix = "", duration = 1500 }) {
  const [display, setDisplay] = useState(0);
  const ref = useRef(null);
  const hasAnimated = useRef(false);
  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting && !hasAnimated.current) {
        hasAnimated.current = true;
        const start = Date.now();
        const animate = () => {
          const elapsed = Date.now() - start;
          const progress = Math.min(elapsed / duration, 1);
          const eased = 1 - Math.pow(1 - progress, 3);
          setDisplay(Math.round(value * eased));
          if (progress < 1) requestAnimationFrame(animate);
        };
        animate();
      }
    }, { threshold: 0.3 });
    if (ref.current) observer.observe(ref.current);
    return () => observer.disconnect();
  }, [value, duration]);
  return <span ref={ref}>{prefix}{display.toLocaleString()}{suffix}</span>;
}

function StatusBadge({ status }) {
  const c = {
    active: { label: "進行中", bg: T.accentBg, text: T.accent },
    completed: { label: "已完成", bg: T.greenBg, text: T.greenText },
    pending: { label: "待審核", bg: T.goldBg, text: T.goldText },
    defaulted: { label: "違約", bg: T.redBg, text: T.redText },
  }[status] || { label: "—", bg: T.bgAlt, text: T.text4 };
  return (
    <span style={{ display: "inline-flex", alignItems: "center", gap: "6px", padding: "4px 10px", borderRadius: "9999px", fontSize: "12px", fontWeight: 500, backgroundColor: c.bg, color: c.text }}>
      <span style={{ width: "6px", height: "6px", borderRadius: "50%", backgroundColor: c.text }} />
      {c.label}
    </span>
  );
}

function FadeInSection({ children, className = "", delay = 0 }) {
  const ref = useRef(null);
  const [visible, setVisible] = useState(false);
  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) setVisible(true);
    }, { threshold: 0.1 });
    if (ref.current) observer.observe(ref.current);
    return () => observer.disconnect();
  }, []);
  return (
    <div ref={ref} className={className}
      style={{ opacity: visible ? 1 : 0, transform: visible ? "translateY(0)" : "translateY(24px)",
        transition: `opacity 0.7s ease ${delay}s, transform 0.7s ease ${delay}s` }}>
      {children}
    </div>
  );
}

function Navigation({ activePage, setActivePage }) {
  const [scrolled, setScrolled] = useState(false);
  useEffect(() => {
    const handle = () => setScrolled(window.scrollY > 10);
    window.addEventListener("scroll", handle);
    return () => window.removeEventListener("scroll", handle);
  }, []);
  const pages = [
    { id: "home", label: "總覽" },
    { id: "flow", label: "交易流程" },
    { id: "dashboard", label: "儀表板" },
    { id: "risk", label: "風控" },
    { id: "roles", label: "角色與費率" },
  ];
  return (
    <nav style={{ position: "fixed", top: 0, left: 0, right: 0, zIndex: 50, transition: "all 0.3s",
      backgroundColor: scrolled ? "rgba(251,251,253,0.88)" : "rgba(251,251,253,0.72)",
      backdropFilter: "saturate(180%) blur(20px)", WebkitBackdropFilter: "saturate(180%) blur(20px)",
      borderBottom: scrolled ? `0.5px solid ${T.border}` : "none" }}>
      <div style={{ maxWidth: "1024px", margin: "0 auto", padding: "0 24px" }}>
        <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", height: "48px" }}>
          <button onClick={() => setActivePage("home")} style={{ display: "flex", alignItems: "center", gap: "10px", border: "none", background: "none", cursor: "pointer" }}>
            <div style={{ width: "28px", height: "28px", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 700, fontSize: "11px", letterSpacing: "0.05em", background: "linear-gradient(135deg, #1D1D1F, #424245)", color: T.white }}>R</div>
            <span style={{ fontSize: "14px", fontWeight: 600, color: T.text1 }}>RWA Finance</span>
          </button>
          <div style={{ display: "flex", alignItems: "center", gap: "4px" }}>
            {pages.map((p) => (
              <button key={p.id} onClick={() => setActivePage(p.id)}
                style={{ padding: "6px 12px", borderRadius: "9999px", fontSize: "12px", fontWeight: 500, border: "none", cursor: "pointer", transition: "all 0.2s",
                  color: activePage === p.id ? T.white : T.text3,
                  backgroundColor: activePage === p.id ? T.text1 : "transparent" }}>
                {p.label}
              </button>
            ))}
          </div>
        </div>
      </div>
    </nav>
  );
}

function HomePage({ setActivePage }) {
  return (
    <div style={{ backgroundColor: T.bg }}>
      <section style={{ paddingTop: "128px", paddingBottom: "80px", paddingLeft: "24px", paddingRight: "24px" }}>
        <div style={{ maxWidth: "896px", margin: "0 auto", textAlign: "center" }}>
          <FadeInSection>
            <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "20px", color: T.accent }}>台灣出口供應鏈融資</p>
            <h1 style={{ fontSize: "clamp(48px, 6vw, 72px)", fontWeight: 700, lineHeight: 1.1, letterSpacing: "-0.02em", marginBottom: "24px", color: T.text1 }}>
              應收帳款融資，<br />
              <span style={{ background: "linear-gradient(135deg, #0071E3, #5AC8FA)", WebkitBackgroundClip: "text", WebkitTextFillColor: "transparent" }}>重新定義。</span>
            </h1>
            <p style={{ fontSize: "clamp(18px, 2.5vw, 24px)", lineHeight: 1.6, maxWidth: "640px", margin: "0 auto 40px", color: T.text3 }}>
              透過 RWA 代幣化與風險分層設計，讓中小型出口製造商不再受限於 90 天帳期。
            </p>
          </FadeInSection>
          <FadeInSection delay={0.15}>
            <div style={{ display: "flex", flexWrap: "wrap", justifyContent: "center", gap: "12px" }}>
              <button onClick={() => setActivePage("flow")} style={{ padding: "12px 28px", borderRadius: "9999px", fontWeight: 500, fontSize: "16px", border: "none", cursor: "pointer", backgroundColor: T.accent, color: T.white, transition: "transform 0.2s" }}
                onMouseOver={e => e.target.style.transform = "scale(1.05)"} onMouseOut={e => e.target.style.transform = "scale(1)"}>探索運作方式</button>
              <button onClick={() => setActivePage("dashboard")} style={{ padding: "12px 28px", borderRadius: "9999px", fontWeight: 500, fontSize: "16px", border: "none", cursor: "pointer", backgroundColor: T.bgAlt, color: T.text1, transition: "transform 0.2s" }}
                onMouseOver={e => e.target.style.transform = "scale(1.05)"} onMouseOut={e => e.target.style.transform = "scale(1)"}>查看儀表板</button>
            </div>
          </FadeInSection>
        </div>
      </section>

      <section style={{ padding: "64px 24px", backgroundColor: T.white }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto", display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: "32px" }}>
          {[
            { value: 8, suffix: "%", label: "優先層級年化報酬", sub: "25% 緩衝保護" },
            { value: 88, suffix: "%", label: "下包廠商毛利增幅", sub: "提前取得現金" },
            { value: 7, suffix: " 層", label: "風險防護機制", sub: "獨立查核與智能合約" },
            { value: 90, suffix: " 天", label: "帳期代幣化", sub: "零息債券折價模型" },
          ].map((item, i) => (
            <FadeInSection key={i} delay={i * 0.08}>
              <div style={{ textAlign: "center" }}>
                <div style={{ fontSize: "clamp(36px, 4vw, 48px)", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "8px", color: T.text1 }}>
                  <AnimatedNumber value={item.value} suffix={item.suffix} />
                </div>
                <p style={{ fontSize: "14px", fontWeight: 500, marginBottom: "4px", color: T.text2 }}>{item.label}</p>
                <p style={{ fontSize: "12px", color: T.text4 }}>{item.sub}</p>
              </div>
            </FadeInSection>
          ))}
        </div>
      </section>

      <section style={{ padding: "96px 24px", backgroundColor: T.bg }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto" }}>
          <FadeInSection>
            <div style={{ maxWidth: "640px", marginBottom: "64px" }}>
              <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.red }}>供應鏈現金流困境</p>
              <h2 style={{ fontSize: "clamp(28px, 3.5vw, 40px)", fontWeight: 700, lineHeight: 1.15, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>
                出貨後的 90 天，<br />不該成為成長的瓶頸。
              </h2>
              <p style={{ fontSize: "18px", lineHeight: 1.6, color: T.text3 }}>
                傳統融資管道對中小企業並不友善。缺乏不動產擔保、融資金額不符銀行經濟效益——這些痛點讓出口製造商的成長空間受到嚴重壓縮。
              </p>
            </div>
          </FadeInSection>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: "20px" }}>
            {[
              { title: "下包廠商", desc: "出貨給接單貿易商，金額 500 萬", sub: "成本 400 萬，毛利 100 萬（20%）", icon: "1" },
              { title: "接單貿易商", desc: "轉賣給海外客戶，金額 525 萬", sub: "成本 500 萬，毛利 25 萬（4.76%）", icon: "2" },
              { title: "現金流缺口", desc: "出貨後等 90 天才收到款項", sub: "新訂單因資金不足無法承接", icon: "3" },
            ].map((item, i) => (
              <FadeInSection key={i} delay={i * 0.1}>
                <div style={{ padding: "28px", borderRadius: "16px", backgroundColor: T.white, boxShadow: T.shadow, transition: "box-shadow 0.3s" }}
                  onMouseOver={e => e.currentTarget.style.boxShadow = T.shadowMd} onMouseOut={e => e.currentTarget.style.boxShadow = T.shadow}>
                  <div style={{ width: "40px", height: "40px", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "14px", fontWeight: 700, marginBottom: "20px", backgroundColor: T.bgAlt, color: T.text2 }}>{item.icon}</div>
                  <h3 style={{ fontSize: "18px", fontWeight: 600, marginBottom: "8px", color: T.text1 }}>{item.title}</h3>
                  <p style={{ fontSize: "14px", marginBottom: "4px", lineHeight: 1.5, color: T.text3 }}>{item.desc}</p>
                  <p style={{ fontSize: "12px", color: T.text4 }}>{item.sub}</p>
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>
      </section>

      <section style={{ padding: "96px 24px", backgroundColor: T.white }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto" }}>
          <FadeInSection>
            <div style={{ textAlign: "center", maxWidth: "640px", margin: "0 auto 80px" }}>
              <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.accent }}>結構化融資方案</p>
              <h2 style={{ fontSize: "clamp(28px, 3.5vw, 40px)", fontWeight: 700, lineHeight: 1.15, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>
                風險分層。智能合約。<br />一站式代幣化融資。
              </h2>
              <p style={{ fontSize: "18px", lineHeight: 1.6, color: T.text3 }}>結合零息債券折價發行模型與自動化還款瀑布，讓每一筆融資都有清晰、透明的風險結構。</p>
            </div>
          </FadeInSection>

          <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "24px", marginBottom: "64px" }}>
            <FadeInSection>
              <div style={{ padding: "32px", borderRadius: "16px", backgroundColor: T.bg, boxShadow: T.shadow, height: "100%" }}>
                <p style={{ fontSize: "11px", fontWeight: 600, letterSpacing: "0.1em", textTransform: "uppercase", marginBottom: "24px", color: T.text4 }}>Risk Tranching</p>
                <h3 style={{ fontSize: "20px", fontWeight: 700, marginBottom: "32px", color: T.text1 }}>風險分層設計</h3>
                <div style={{ display: "flex", flexDirection: "column", gap: "16px" }}>
                  <div style={{ borderRadius: "16px", padding: "24px", backgroundColor: T.greenBg }}>
                    <div style={{ display: "flex", justifyContent: "space-between", marginBottom: "8px" }}>
                      <span style={{ fontWeight: 600, color: T.greenText }}>外部投資人 — 優先層級</span>
                      <span style={{ fontSize: "14px", fontWeight: 700, color: T.greenText }}>75%</span>
                    </div>
                    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                      <span style={{ fontSize: "14px", color: T.greenText }}>年化報酬 8%</span>
                      <span style={{ fontSize: "12px", padding: "4px 10px", borderRadius: "9999px", fontWeight: 500, backgroundColor: "rgba(27,122,46,0.12)", color: T.greenText }}>較低風險</span>
                    </div>
                    <div style={{ marginTop: "12px", height: "10px", borderRadius: "9999px", overflow: "hidden", backgroundColor: "rgba(27,122,46,0.12)" }}>
                      <div style={{ height: "100%", width: "75%", borderRadius: "9999px", backgroundColor: T.green }} />
                    </div>
                  </div>
                  <div style={{ borderRadius: "16px", padding: "24px", backgroundColor: T.goldBg }}>
                    <div style={{ display: "flex", justifyContent: "space-between", marginBottom: "8px" }}>
                      <span style={{ fontWeight: 600, color: T.goldText }}>接單貿易商 — 次優先層級</span>
                      <span style={{ fontSize: "14px", fontWeight: 700, color: T.goldText }}>25%</span>
                    </div>
                    <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                      <span style={{ fontSize: "14px", color: T.goldText }}>年化報酬 12%</span>
                      <span style={{ fontSize: "12px", padding: "4px 10px", borderRadius: "9999px", fontWeight: 500, backgroundColor: "rgba(139,105,20,0.12)", color: T.goldText }}>先承擔損失</span>
                    </div>
                    <div style={{ marginTop: "12px", height: "10px", borderRadius: "9999px", overflow: "hidden", backgroundColor: "rgba(139,105,20,0.12)" }}>
                      <div style={{ height: "100%", width: "25%", borderRadius: "9999px", backgroundColor: T.gold }} />
                    </div>
                  </div>
                </div>
              </div>
            </FadeInSection>
            <FadeInSection delay={0.1}>
              <div style={{ padding: "32px", borderRadius: "16px", backgroundColor: T.bg, boxShadow: T.shadow, height: "100%" }}>
                <p style={{ fontSize: "11px", fontWeight: 600, letterSpacing: "0.1em", textTransform: "uppercase", marginBottom: "24px", color: T.text4 }}>Payment Waterfall</p>
                <h3 style={{ fontSize: "20px", fontWeight: 700, marginBottom: "32px", color: T.text1 }}>自動還款瀑布</h3>
                <div style={{ display: "flex", flexDirection: "column", gap: "20px" }}>
                  {[
                    { order: 1, who: "外部投資人", desc: "按面額優先贖回", color: T.green, bg: T.greenBg },
                    { order: 2, who: "接單貿易商", desc: "按面額次優先贖回", color: T.gold, bg: T.goldBg },
                    { order: 3, who: "下包廠商", desc: "剩餘款項歸還", color: T.accent, bg: T.accentBg },
                  ].map((item) => (
                    <div key={item.order} style={{ display: "flex", alignItems: "center", gap: "16px" }}>
                      <div style={{ width: "44px", height: "44px", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "18px", fontWeight: 700, flexShrink: 0, backgroundColor: item.bg, color: item.color }}>{item.order}</div>
                      <div style={{ flex: 1 }}>
                        <p style={{ fontWeight: 600, fontSize: "14px", color: T.text1 }}>{item.who}</p>
                        <p style={{ fontSize: "14px", color: T.text4 }}>{item.desc}</p>
                      </div>
                    </div>
                  ))}
                </div>
                <div style={{ marginTop: "32px", padding: "16px", borderRadius: "12px", backgroundColor: T.accentBg }}>
                  <p style={{ fontSize: "12px", lineHeight: 1.6, color: T.accent }}>採用零息債券（Zero Coupon Bond）折價發行模式，到期按面額全額贖回。智能合約自動執行資金分配，無需人工介入。</p>
                </div>
              </div>
            </FadeInSection>
          </div>

          <FadeInSection>
            <div style={{ textAlign: "center", marginBottom: "48px" }}>
              <h3 style={{ fontSize: "24px", fontWeight: 700, letterSpacing: "-0.02em", color: T.text1 }}>各方參與效益</h3>
            </div>
          </FadeInSection>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: "20px" }}>
            {[
              { label: "下包廠商毛利增幅", value: 88, suffix: "%", sub: "400萬 → 753萬", color: T.accent, bg: T.accentBg },
              { label: "接單貿易商收益增幅", value: 111, suffix: "%", sub: "500萬 → 1,057萬", color: T.goldText, bg: T.goldBg },
              { label: "優先層級年化報酬", value: 8, suffix: "%", sub: "25% 次優先緩衝保護", color: T.greenText, bg: T.greenBg },
              { label: "平台費年化", value: "1.2", suffix: "%", sub: "風控由會計師把關", color: T.purple, bg: T.purpleBg },
            ].map((item, i) => (
              <FadeInSection key={i} delay={i * 0.08}>
                <div style={{ padding: "24px", borderRadius: "16px", textAlign: "center", backgroundColor: item.bg }}>
                  <div style={{ fontSize: "30px", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "8px", color: item.color }}>
                    {typeof item.value === "number" && item.value > 10 ? <AnimatedNumber value={item.value} suffix={item.suffix} /> : <>{item.value}{item.suffix}</>}
                  </div>
                  <p style={{ fontSize: "14px", fontWeight: 500, marginBottom: "4px", color: T.text1 }}>{item.label}</p>
                  <p style={{ fontSize: "12px", color: T.text4 }}>{item.sub}</p>
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>
      </section>

      <section style={{ padding: "96px 24px", backgroundColor: T.bg }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto" }}>
          <FadeInSection>
            <div style={{ textAlign: "center", maxWidth: "640px", margin: "0 auto 64px" }}>
              <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.greenText }}>安全與合規</p>
              <h2 style={{ fontSize: "clamp(28px, 3.5vw, 40px)", fontWeight: 700, lineHeight: 1.15, letterSpacing: "-0.02em", color: T.text1 }}>
                七層保護。每一筆交易，<br />都經得起檢驗。
              </h2>
            </div>
          </FadeInSection>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: "20px", marginBottom: "48px" }}>
            {[
              { title: "獨立會計師查核", desc: "每筆交易由會計師獨立查核接單貿易商信用、終端客戶信用、應收帳款真實性", badge: "3 層查核" },
              { title: "智能合約自動執行", desc: "資金存入智能合約，還款順序寫入程式碼中，無法被任何一方更改", badge: "自動化" },
              { title: "資安公司審計", desc: "智能合約由 CertiK 等級的資安公司進行全面審計，確保無漏洞", badge: "外部審計" },
            ].map((item, i) => (
              <FadeInSection key={i} delay={i * 0.1}>
                <div style={{ padding: "28px", borderRadius: "16px", backgroundColor: T.white, boxShadow: T.shadow, height: "100%" }}>
                  <span style={{ display: "inline-block", fontSize: "12px", fontWeight: 500, padding: "4px 10px", borderRadius: "9999px", marginBottom: "20px", backgroundColor: T.greenBg, color: T.greenText }}>{item.badge}</span>
                  <h3 style={{ fontSize: "18px", fontWeight: 600, marginBottom: "12px", color: T.text1 }}>{item.title}</h3>
                  <p style={{ fontSize: "14px", lineHeight: 1.6, color: T.text3 }}>{item.desc}</p>
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>
      </section>

      <section style={{ padding: "96px 24px", backgroundColor: T.white }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto" }}>
          <FadeInSection>
            <div style={{ textAlign: "center", maxWidth: "640px", margin: "0 auto 64px" }}>
              <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.purple }}>透明費率</p>
              <h2 style={{ fontSize: "clamp(28px, 3.5vw, 40px)", fontWeight: 700, lineHeight: 1.15, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>
                清晰的費率結構，<br />沒有隱藏成本。
              </h2>
              <p style={{ fontSize: "18px", color: T.text3 }}>每一分錢的去向，一目了然。</p>
            </div>
          </FadeInSection>
          <FadeInSection>
            <div style={{ borderRadius: "16px", overflow: "hidden", backgroundColor: T.bg, boxShadow: T.shadow }}>
              {[
                { role: "外部投資人（優先）", annual: "8%", color: T.green },
                { role: "接單貿易商（次優先）", annual: "12%", color: T.gold },
                { role: "平台營運", annual: "1.2%", color: T.purple },
                { role: "銷售通路", annual: "0.9%", color: T.orange },
                { role: "會計師查核", annual: "0.4% 或 1 萬", color: T.teal },
              ].map((item, i) => (
                <div key={i} style={{ display: "flex", alignItems: "center", padding: "20px 32px", borderBottom: `1px solid ${T.borderLight}` }}>
                  <div style={{ display: "flex", alignItems: "center", gap: "12px", flex: 1 }}>
                    <div style={{ width: "10px", height: "10px", borderRadius: "50%", backgroundColor: item.color }} />
                    <span style={{ fontSize: "14px", fontWeight: 500, color: T.text1 }}>{item.role}</span>
                  </div>
                  <div>
                    <span style={{ fontSize: "14px", fontWeight: 600, color: T.text1 }}>{item.annual}</span>
                    <span style={{ fontSize: "12px", marginLeft: "12px", color: T.text4 }}>年化</span>
                  </div>
                </div>
              ))}
              <div style={{ display: "flex", alignItems: "center", padding: "20px 32px", backgroundColor: T.bgAlt }}>
                <span style={{ fontSize: "14px", fontWeight: 700, flex: 1, color: T.text1 }}>下包廠商總融資成本</span>
                <div>
                  <span style={{ fontSize: "14px", fontWeight: 700, color: T.accent }}>約 11.9%</span>
                  <span style={{ fontSize: "12px", marginLeft: "12px", color: T.text4 }}>年化</span>
                </div>
              </div>
            </div>
          </FadeInSection>
        </div>
      </section>

      <section style={{ padding: "96px 24px", backgroundColor: T.bg }}>
        <FadeInSection>
          <div style={{ maxWidth: "768px", margin: "0 auto", textAlign: "center" }}>
            <h2 style={{ fontSize: "clamp(28px, 3.5vw, 40px)", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>深入了解每一個環節</h2>
            <p style={{ fontSize: "18px", marginBottom: "40px", color: T.text3 }}>探索完整的交易流程、即時儀表板與多層風控架構。</p>
            <div style={{ display: "flex", flexWrap: "wrap", justifyContent: "center", gap: "12px" }}>
              {[
                { id: "flow", label: "交易流程" },
                { id: "dashboard", label: "儀表板" },
                { id: "risk", label: "風控架構" },
                { id: "roles", label: "角色與費率" },
              ].map((btn) => (
                <button key={btn.id} onClick={() => setActivePage(btn.id)}
                  style={{ padding: "12px 24px", borderRadius: "9999px", fontSize: "14px", fontWeight: 500, border: "none", cursor: "pointer", backgroundColor: T.white, color: T.text1, boxShadow: T.shadow, transition: "transform 0.2s" }}
                  onMouseOver={e => e.target.style.transform = "scale(1.05)"} onMouseOut={e => e.target.style.transform = "scale(1)"}>
                  {btn.label}
                </button>
              ))}
            </div>
          </div>
        </FadeInSection>
      </section>
    </div>
  );
}

function FlowPage() {
  const [phase, setPhase] = useState("issue");
  const [step, setStep] = useState(0);
  const issueSteps = [
    { title: "下包廠商出貨", desc: "下包廠商出貨給接單貿易商，產生 500 萬應收帳款", amount: "NT$ 500 萬" },
    { title: "接單貿易商轉售", desc: "接單貿易商出貨給海外客戶，產生 525 萬應收帳款", amount: "NT$ 525 萬" },
    { title: "會計師獨立查核", desc: "查核接單貿易商信用、終端客戶信用、應收帳款真實性", amount: "查核通過" },
    { title: "外部投資人投入優先資金", desc: "以折價投入優先層級資金（面額 300 萬）", amount: "NT$ 294.19 萬" },
    { title: "接單貿易商投入次優先資金", desc: "以折價投入次優先層級資金（面額 100 萬）", amount: "NT$ 97.13 萬" },
    { title: "智能合約發行 RWA 代幣", desc: "發行優先層級與次優先層級代幣", amount: "—" },
    { title: "扣除平台營運費用", desc: "平台費 1.18 萬 + 銷售佣金 0.89 萬 + 查核費 1.0 萬", amount: "-NT$ 3.07 萬" },
    { title: "下包廠商實際收款", desc: "下包廠商提前取得融資款項", amount: "NT$ 388.25 萬" },
  ];
  const redeemSteps = [
    { title: "海外客戶付款", desc: "海外客戶支付貨款予接單貿易商", amount: "NT$ 525 萬" },
    { title: "接單貿易商注入智能合約", desc: "接單貿易商將應付款項注入智能合約", amount: "NT$ 500 萬" },
    { title: "優先層級按面額贖回", desc: "智能合約自動分配——外部投資人優先贖回", amount: "NT$ 300 萬" },
    { title: "次優先層級按面額贖回", desc: "智能合約自動分配——接單貿易商次順位贖回", amount: "NT$ 100 萬" },
    { title: "剩餘款項歸還下包廠商", desc: "智能合約自動分配——剩餘歸還融資方", amount: "NT$ 100 萬" },
    { title: "RWA 代幣註銷", desc: "交易完成結算，代幣自動銷毀", amount: "—" },
  ];
  const steps = phase === "issue" ? issueSteps : redeemSteps;
  const maxStep = steps.length - 1;
  useEffect(() => { setStep(0); }, [phase]);

  return (
    <div style={{ minHeight: "100vh", paddingTop: "80px", backgroundColor: T.bg }}>
      <div style={{ maxWidth: "896px", margin: "0 auto", padding: "64px 24px" }}>
        <FadeInSection>
          <div style={{ textAlign: "center", marginBottom: "56px" }}>
            <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.accent }}>Transaction Flow</p>
            <h1 style={{ fontSize: "clamp(28px, 4vw, 48px)", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>交易流程</h1>
            <p style={{ fontSize: "18px", color: T.text3 }}>完整的 RWA 融資發行與到期贖回流程</p>
          </div>
        </FadeInSection>

        <div style={{ display: "flex", justifyContent: "center", marginBottom: "48px" }}>
          <div style={{ display: "inline-flex", padding: "4px", borderRadius: "9999px", backgroundColor: T.bgAlt }}>
            {[{ id: "issue", label: "T=0 發行階段" }, { id: "redeem", label: "T=90 天贖回階段" }].map((p) => (
              <button key={p.id} onClick={() => setPhase(p.id)}
                style={{ padding: "10px 24px", borderRadius: "9999px", fontSize: "14px", fontWeight: 500, border: "none", cursor: "pointer", transition: "all 0.2s",
                  backgroundColor: phase === p.id ? T.white : "transparent",
                  color: phase === p.id ? T.text1 : T.text4,
                  boxShadow: phase === p.id ? T.shadow : "none" }}>
                {p.label}
              </button>
            ))}
          </div>
        </div>

        <div style={{ marginBottom: "40px" }}>
          <div style={{ display: "flex", gap: "6px" }}>
            {steps.map((_, i) => (
              <div key={i} style={{ flex: 1, height: "4px", borderRadius: "9999px", transition: "background-color 0.5s",
                backgroundColor: i <= step ? T.accent : T.border }} />
            ))}
          </div>
          <div style={{ display: "flex", justifyContent: "space-between", marginTop: "8px" }}>
            <span style={{ fontSize: "12px", color: T.text4 }}>步驟 {step + 1}</span>
            <span style={{ fontSize: "12px", color: T.text4 }}>共 {steps.length} 步</span>
          </div>
        </div>

        <div style={{ borderRadius: "16px", padding: "40px", marginBottom: "32px", backgroundColor: T.white, boxShadow: T.shadowMd }}>
          <div style={{ display: "flex", alignItems: "flex-start", gap: "24px" }}>
            <div style={{ width: "56px", height: "56px", borderRadius: "16px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "20px", fontWeight: 700, flexShrink: 0, backgroundColor: T.accent, color: T.white }}>{step + 1}</div>
            <div>
              <h3 style={{ fontSize: "24px", fontWeight: 700, marginBottom: "12px", color: T.text1 }}>{steps[step].title}</h3>
              <p style={{ fontSize: "16px", marginBottom: "20px", lineHeight: 1.6, color: T.text3 }}>{steps[step].desc}</p>
              <div style={{ display: "inline-block", padding: "10px 20px", borderRadius: "12px", fontSize: "18px", fontWeight: 700, backgroundColor: T.accentBg, color: T.accent }}>{steps[step].amount}</div>
            </div>
          </div>
        </div>

        <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between", marginBottom: "64px" }}>
          <button onClick={() => setStep(Math.max(0, step - 1))} disabled={step === 0}
            style={{ padding: "10px 20px", borderRadius: "9999px", fontSize: "14px", fontWeight: 500, border: "none", cursor: step === 0 ? "default" : "pointer", opacity: step === 0 ? 0.3 : 1, backgroundColor: T.bgAlt, color: T.text2 }}>上一步</button>
          <div style={{ display: "flex", gap: "8px" }}>
            {steps.map((_, i) => (
              <button key={i} onClick={() => setStep(i)}
                style={{ width: "8px", height: "8px", borderRadius: "50%", border: "none", cursor: "pointer", transition: "all 0.2s",
                  backgroundColor: i === step ? T.accent : i <= step ? T.text5 : T.border,
                  transform: i === step ? "scale(1.5)" : "scale(1)" }} />
            ))}
          </div>
          <button onClick={() => setStep(Math.min(maxStep, step + 1))} disabled={step === maxStep}
            style={{ padding: "10px 20px", borderRadius: "9999px", fontSize: "14px", fontWeight: 500, border: "none", cursor: step === maxStep ? "default" : "pointer", opacity: step === maxStep ? 0.3 : 1, backgroundColor: T.accent, color: T.white }}>下一步</button>
        </div>

        <div>
          <h3 style={{ fontSize: "18px", fontWeight: 700, marginBottom: "20px", color: T.text1 }}>完整步驟一覽</h3>
          <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
            {steps.map((s, i) => (
              <div key={i} onClick={() => setStep(i)}
                style={{ display: "flex", alignItems: "center", gap: "16px", padding: "16px", borderRadius: "12px", cursor: "pointer", transition: "all 0.2s",
                  backgroundColor: i === step ? T.accentBg : T.white, boxShadow: i === step ? "none" : T.shadow }}>
                <div style={{ width: "32px", height: "32px", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "12px", fontWeight: 700, flexShrink: 0,
                  backgroundColor: i <= step ? T.accent : T.bgAlt, color: i <= step ? T.white : T.text4 }}>
                  {i < step ? "\u2713" : i + 1}
                </div>
                <p style={{ flex: 1, fontSize: "14px", fontWeight: 500, color: T.text1, overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }}>{s.title}</p>
                <span style={{ fontSize: "12px", fontWeight: 600, flexShrink: 0, color: T.accent }}>{s.amount}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
}

function DashboardPage() {
  const [selectedTx, setSelectedTx] = useState(null);
  const totalFinanced = MOCK_TRANSACTIONS.reduce((sum, t) => sum + t.financed, 0);
  const activeTx = MOCK_TRANSACTIONS.filter((t) => t.status === "active").length;
  const completedTx = MOCK_TRANSACTIONS.filter((t) => t.status === "completed").length;

  return (
    <div style={{ minHeight: "100vh", paddingTop: "80px", backgroundColor: T.bg }}>
      <div style={{ maxWidth: "1152px", margin: "0 auto", padding: "64px 24px" }}>
        <FadeInSection>
          <div style={{ marginBottom: "40px" }}>
            <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "8px", color: T.accent }}>Dashboard</p>
            <h1 style={{ fontSize: "30px", fontWeight: 700, marginBottom: "8px", color: T.text1 }}>儀表板</h1>
            <p style={{ color: T.text3 }}>即時監控平台交易狀態與各方損益</p>
          </div>
        </FadeInSection>

        <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: "20px", marginBottom: "40px" }}>
          {[
            { label: "總融資額", value: totalFinanced, prefix: "NT$ ", suffix: " 萬", color: T.accent },
            { label: "進行中交易", value: activeTx, suffix: " 筆", color: T.gold },
            { label: "已完成交易", value: completedTx, suffix: " 筆", color: T.green },
            { label: "平台費收入", value: 26.4, prefix: "NT$ ", suffix: " 萬", color: T.purple },
          ].map((stat, i) => (
            <FadeInSection key={i} delay={i * 0.06}>
              <div style={{ padding: "24px", borderRadius: "16px", backgroundColor: T.white, boxShadow: T.shadow }}>
                <p style={{ fontSize: "11px", fontWeight: 500, letterSpacing: "0.1em", textTransform: "uppercase", marginBottom: "16px", color: T.text4 }}>{stat.label}</p>
                <div style={{ fontSize: "24px", fontWeight: 700, color: stat.color }}>
                  <AnimatedNumber value={stat.value} prefix={stat.prefix || ""} suffix={stat.suffix || ""} />
                </div>
              </div>
            </FadeInSection>
          ))}
        </div>

        <div style={{ display: "grid", gridTemplateColumns: "2fr 1fr", gap: "24px" }}>
          <div style={{ borderRadius: "16px", overflow: "hidden", backgroundColor: T.white, boxShadow: T.shadow }}>
            <div style={{ padding: "20px 28px", borderBottom: `1px solid ${T.borderLight}` }}>
              <h2 style={{ fontSize: "16px", fontWeight: 600, color: T.text1 }}>交易列表</h2>
            </div>
            {MOCK_TRANSACTIONS.map((tx, idx) => (
              <div key={tx.id} onClick={() => setSelectedTx(selectedTx?.id === tx.id ? null : tx)}
                style={{ padding: "20px 28px", cursor: "pointer", transition: "background-color 0.2s",
                  borderBottom: idx < MOCK_TRANSACTIONS.length - 1 ? `1px solid ${T.borderLight}` : "none",
                  backgroundColor: selectedTx?.id === tx.id ? T.accentBg : "transparent" }}>
                <div style={{ display: "flex", justifyContent: "space-between", marginBottom: "8px" }}>
                  <div style={{ display: "flex", alignItems: "center", gap: "12px" }}>
                    <span style={{ fontFamily: "monospace", fontSize: "12px", color: T.text4 }}>{tx.id}</span>
                    <StatusBadge status={tx.status} />
                  </div>
                  <span style={{ fontSize: "14px", fontWeight: 700, color: T.text1 }}>NT$ {tx.financed} 萬</span>
                </div>
                <div style={{ display: "flex", justifyContent: "space-between" }}>
                  <p style={{ fontSize: "14px", color: T.text3 }}>
                    <span style={{ fontWeight: 500, color: T.text1 }}>{tx.supplier}</span>
                    <span style={{ color: T.text5 }}> → </span>{tx.trader}
                  </p>
                  <span style={{ fontSize: "12px", color: T.text4 }}>
                    {tx.status === "completed" ? "已完成" : tx.status === "pending" ? "待審核" : `剩餘 ${tx.daysLeft} 天`}
                  </span>
                </div>
                {tx.status === "active" && (
                  <div style={{ marginTop: "12px", height: "6px", borderRadius: "9999px", overflow: "hidden", backgroundColor: T.bgAlt }}>
                    <div style={{ height: "100%", borderRadius: "9999px", transition: "width 1s", width: `${tx.progress}%`, backgroundColor: T.accent }} />
                  </div>
                )}
              </div>
            ))}
          </div>

          <div style={{ display: "flex", flexDirection: "column", gap: "24px" }}>
            <div style={{ borderRadius: "16px", padding: "28px", backgroundColor: T.white, boxShadow: T.shadow }}>
              <h3 style={{ fontSize: "16px", fontWeight: 600, marginBottom: "20px", color: T.text1 }}>單筆損益分析</h3>
              <p style={{ fontSize: "12px", marginBottom: "20px", color: T.text4 }}>以 NT$ 400 萬融資為例</p>
              <div style={{ display: "flex", flexDirection: "column", gap: "14px" }}>
                {[
                  { role: "下包廠商", profit: "88.25 萬", color: T.accent },
                  { role: "接單貿易商", profit: "27.87 萬", color: T.gold },
                  { role: "外部投資人", profit: "5.81 萬", color: T.green },
                  { role: "平台", profit: "1.18 萬", color: T.purple },
                  { role: "銷售通路", profit: "0.89 萬", color: T.orange },
                  { role: "會計師", profit: "1.0 萬", color: T.teal },
                ].map((item, i) => (
                  <div key={i} style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                    <div style={{ display: "flex", alignItems: "center", gap: "10px" }}>
                      <div style={{ width: "10px", height: "10px", borderRadius: "50%", backgroundColor: item.color }} />
                      <span style={{ fontSize: "14px", color: T.text3 }}>{item.role}</span>
                    </div>
                    <span style={{ fontSize: "14px", fontWeight: 600, color: T.text1 }}>{item.profit}</span>
                  </div>
                ))}
              </div>
            </div>

            <div style={{ borderRadius: "16px", padding: "28px", backgroundColor: T.white, boxShadow: T.shadow }}>
              <h3 style={{ fontSize: "16px", fontWeight: 600, marginBottom: "20px", color: T.text1 }}>執行里程碑</h3>
              <div style={{ display: "flex", flexDirection: "column", gap: "16px" }}>
                {[
                  { milestone: "法律架構完成", month: "M1-2", done: true },
                  { milestone: "智能合約開發", month: "M2-3", done: true },
                  { milestone: "資安審計完成", month: "M3-4", done: false },
                  { milestone: "首筆交易", month: "M4-5", done: false },
                  { milestone: "累計 10 筆交易", month: "M5-8", done: false },
                  { milestone: "累計 30 筆交易", month: "M9-12", done: false },
                ].map((item, i) => (
                  <div key={i} style={{ display: "flex", alignItems: "center", gap: "12px" }}>
                    <div style={{ width: "24px", height: "24px", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "12px", fontWeight: 700, flexShrink: 0,
                      backgroundColor: item.done ? T.greenBg : T.bgAlt, color: item.done ? T.greenText : T.text5 }}>
                      {item.done ? "\u2713" : ""}
                    </div>
                    <p style={{ fontSize: "14px", flex: 1, color: item.done ? T.text1 : T.text4 }}>{item.milestone}</p>
                    <span style={{ fontSize: "12px", color: T.text5 }}>{item.month}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

function RiskPage() {
  const [expandedLayer, setExpandedLayer] = useState(null);
  const [selectedScenario, setSelectedScenario] = useState(0);
  const layerDetails = [
    "會計師在代幣發行前進行獨立查核，查核項目包括基本資料、付款能力、過往紀錄等。只有查核通過才會進行發行。",
    "會計師在代幣發行前進行獨立查核，查核項目包括基本資料、付款能力、過往紀錄等。只有查核通過才會進行發行。",
    "會計師在代幣發行前進行獨立查核，查核項目包括基本資料、付款能力、過往紀錄等。只有查核通過才會進行發行。",
    "接單貿易商投入 25% 的次優先投資（100 萬），在回收率低於 100% 時先承擔損失。回收率要低於 60%，外部投資人才開始虧損。",
    "應收帳款面額 500 萬，但只融資 400 萬（融資成數 80%），多出的 100 萬提供額外安全邊際。",
    "資金存入智能合約，還款順序寫入程式碼中，無法被任何一方更改。到期後自動按優先順序分配資金。",
    "智能合約首次部署及每次更版都由 CertiK 等級的資安公司進行全面審計，確保無漏洞、後門或重入攻擊風險。",
  ];

  return (
    <div style={{ minHeight: "100vh", paddingTop: "80px", backgroundColor: T.bg }}>
      <div style={{ maxWidth: "1024px", margin: "0 auto", padding: "64px 24px" }}>
        <FadeInSection>
          <div style={{ textAlign: "center", marginBottom: "64px" }}>
            <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.accent }}>Risk Management</p>
            <h1 style={{ fontSize: "clamp(28px, 4vw, 48px)", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>風控架構</h1>
            <p style={{ fontSize: "18px", color: T.text3 }}>七層保護機制，確保每一筆交易的資金安全</p>
          </div>
        </FadeInSection>

        <div style={{ maxWidth: "768px", margin: "0 auto 80px" }}>
          <h2 style={{ fontSize: "20px", fontWeight: 700, marginBottom: "24px", color: T.text1 }}>多層保護機制</h2>
          <div style={{ display: "flex", flexDirection: "column", gap: "10px" }}>
            {RISK_LAYERS.map((layer, idx) => (
              <FadeInSection key={layer.level} delay={idx * 0.05}>
                <div>
                  <div onClick={() => setExpandedLayer(expandedLayer === layer.level ? null : layer.level)}
                    style={{ display: "flex", alignItems: "center", gap: "16px", padding: "20px", borderRadius: "16px", cursor: "pointer", transition: "all 0.2s",
                      backgroundColor: T.white, boxShadow: expandedLayer === layer.level ? T.shadowMd : T.shadow }}>
                    <div style={{ width: "40px", height: "40px", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 700, fontSize: "14px", flexShrink: 0, backgroundColor: T.accent, color: T.white }}>{layer.level}</div>
                    <div style={{ flex: 1 }}>
                      <p style={{ fontWeight: 500, fontSize: "14px", color: T.text1 }}>{layer.name}</p>
                      <p style={{ fontSize: "12px", marginTop: "2px", color: T.text4 }}>防護：{layer.protection}</p>
                    </div>
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"
                      style={{ color: T.text5, transform: expandedLayer === layer.level ? "rotate(180deg)" : "rotate(0)", transition: "transform 0.2s" }}>
                      <path d="M6 8L2 4h8z" />
                    </svg>
                  </div>
                  {expandedLayer === layer.level && (
                    <div style={{ marginTop: "4px", marginLeft: "56px", padding: "16px 20px", borderRadius: "12px", fontSize: "14px", lineHeight: 1.6, backgroundColor: T.accentBg, color: T.accent }}>
                      {layerDetails[idx]}
                    </div>
                  )}
                </div>
              </FadeInSection>
            ))}
          </div>
        </div>

        <div style={{ maxWidth: "768px", margin: "0 auto 80px" }}>
          <FadeInSection>
            <h2 style={{ fontSize: "20px", fontWeight: 700, marginBottom: "12px", color: T.text1 }}>風險情境模擬</h2>
            <p style={{ marginBottom: "32px", color: T.text3 }}>調整回收率，觀察不同情境下各方的損益分配。</p>
          </FadeInSection>
          <FadeInSection>
            <div style={{ borderRadius: "16px", padding: "32px", backgroundColor: T.white, boxShadow: T.shadowMd }}>
              <div style={{ marginBottom: "32px" }}>
                <div style={{ display: "flex", justifyContent: "space-between", marginBottom: "16px" }}>
                  <span style={{ fontSize: "14px", fontWeight: 500, color: T.text3 }}>回收率</span>
                  <span style={{ fontSize: "30px", fontWeight: 700, color: RECOVERY_SCENARIOS[selectedScenario].amount >= 300 ? T.greenText : T.redText }}>
                    {RECOVERY_SCENARIOS[selectedScenario].rate}
                  </span>
                </div>
                <input type="range" min={0} max={RECOVERY_SCENARIOS.length - 1} value={selectedScenario}
                  onChange={(e) => setSelectedScenario(parseInt(e.target.value))}
                  style={{ width: "100%", background: `linear-gradient(to right, ${T.red}, ${T.gold}, ${T.green})` }} />
                <div style={{ display: "flex", justifyContent: "space-between", marginTop: "8px" }}>
                  <span style={{ fontSize: "12px", color: T.text5 }}>0%</span>
                  <span style={{ fontSize: "12px", color: T.text5 }}>50%</span>
                  <span style={{ fontSize: "12px", color: T.text5 }}>100%</span>
                </div>
              </div>

              <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: "16px" }}>
                {[
                  { label: "外部投資人（300萬）", value: RECOVERY_SCENARIOS[selectedScenario].investor, color: T.greenText, bg: T.greenBg },
                  { label: "接單貿易商次優先（100萬）", value: RECOVERY_SCENARIOS[selectedScenario].trader, color: T.goldText, bg: T.goldBg },
                  { label: "下包廠商（100萬剩餘）", value: RECOVERY_SCENARIOS[selectedScenario].supplier, color: T.accent, bg: T.accentBg },
                ].map((card, i) => (
                  <div key={i} style={{ padding: "20px", borderRadius: "12px", backgroundColor: card.bg }}>
                    <p style={{ fontSize: "12px", fontWeight: 500, marginBottom: "8px", color: card.color }}>{card.label}</p>
                    <p style={{ fontSize: "18px", fontWeight: 700, color: T.text1 }}>{card.value}</p>
                  </div>
                ))}
              </div>

              <div style={{ marginTop: "24px", padding: "16px", borderRadius: "12px", backgroundColor: T.bgAlt }}>
                <p style={{ fontSize: "14px", color: T.text3 }}>
                  回收金額：<strong style={{ color: T.text1 }}>NT$ {RECOVERY_SCENARIOS[selectedScenario].amount} 萬</strong>
                </p>
              </div>
            </div>
          </FadeInSection>
        </div>
      </div>
    </div>
  );
}

function RolesPage() {
  const [selectedRole, setSelectedRole] = useState("supplier");
  const roleDetails = {
    supplier: { what: "出貨後，用對接單貿易商的應收帳款發行 RWA 代幣", get: "提前取得現金，不需等待 90 天帳期", cost: "融資成本（年化約 11.9%，折價發行模式）",
      table: [{ label: "可用資金", before: "400 萬", after: "800 萬", diff: "翻倍" },{ label: "年營收", before: "2,000 萬", after: "4,000 萬", diff: "+2,000 萬" },{ label: "年毛利（扣息後）", before: "400 萬", after: "753 萬", diff: "+353 萬（+88%）" }] },
    trader: { what: "1. 確認應收帳款真實性 2. 投資 25% 次優先部位", get: "貿易毛利 + 次優先投資報酬（年化 12%）", cost: "次優先投資的損失風險（若終端客戶不付款，接單貿易商先承擔損失）",
      table: [{ label: "年經手總額", before: "10,000 萬", after: "20,000 萬", diff: "+10,000 萬" },{ label: "貿易毛利（5%）", before: "500 萬", after: "1,000 萬", diff: "+500 萬" },{ label: "接單貿易商總收益", before: "500 萬", after: "1,057 萬", diff: "+557 萬（+111%）" }] },
    investor: { what: "購買優先層級 RWA 代幣", get: "年化 8% 報酬", cost: "接單貿易商 25% 次優先投資先承擔損失，回收率低於 60% 才影響",
      table: [{ label: "投入金額（折價）", before: "—", after: "294.19 萬", diff: "面額 300 萬" },{ label: "90 天收益", before: "—", after: "5.81 萬", diff: "年化 8%" },{ label: "風險緩衝", before: "—", after: "25%", diff: "次優先層先承擔" }] },
    platform: { what: "設計法律和技術架構、發行和管理 RWA 代幣", get: "平台費（年化 1.2%）", cost: "技術開發、法律架構、營運成本",
      table: [{ label: "單筆收入", before: "—", after: "1.18 萬", diff: "年化 1.2%" },{ label: "預估 30 筆收入", before: "—", after: "~35 萬", diff: "" }] },
    sales: { what: "引薦投資人或接單貿易商", get: "銷售佣金（年化 0.9%）", cost: "銷售資源",
      table: [{ label: "單筆佣金", before: "—", after: "0.89 萬", diff: "年化 0.9%" }] },
    accountant: { what: "每筆交易進行獨立查核", get: "查核費用（1 萬或年化 0.4%，取高者）", cost: "對查核報告負專業責任",
      table: [{ label: "1,000 萬以下", before: "—", after: "固定 1 萬", diff: "" },{ label: "1,000 萬以上", before: "—", after: "年化 0.4%", diff: "單筆約 0.1%" }] },
    security: { what: "每次智能合約更版時進行審計", get: "審計費用（每次約 50-150 萬）", cost: "對審計報告負專業責任",
      table: [{ label: "首次全面審計", before: "—", after: "100-150 萬", diff: "" },{ label: "每次更版審計", before: "—", after: "30-50 萬", diff: "" }] },
  };
  const detail = roleDetails[selectedRole];
  const role = ROLES.find((r) => r.id === selectedRole);

  return (
    <div style={{ minHeight: "100vh", paddingTop: "80px", backgroundColor: T.bg }}>
      <div style={{ maxWidth: "1024px", margin: "0 auto", padding: "64px 24px" }}>
        <FadeInSection>
          <div style={{ textAlign: "center", marginBottom: "56px" }}>
            <p style={{ fontSize: "14px", fontWeight: 500, letterSpacing: "0.05em", marginBottom: "12px", color: T.accent }}>Participants & Pricing</p>
            <h1 style={{ fontSize: "clamp(28px, 4vw, 48px)", fontWeight: 700, letterSpacing: "-0.02em", marginBottom: "16px", color: T.text1 }}>角色與費率結構</h1>
            <p style={{ fontSize: "18px", color: T.text3 }}>七個參與方，各司其職，利益對齊</p>
          </div>
        </FadeInSection>

        <div style={{ display: "flex", flexWrap: "wrap", justifyContent: "center", gap: "8px", marginBottom: "48px" }}>
          {ROLES.map((r) => (
            <button key={r.id} onClick={() => setSelectedRole(r.id)}
              style={{ padding: "8px 16px", borderRadius: "9999px", fontSize: "14px", fontWeight: 500, border: "none", cursor: "pointer", transition: "all 0.2s",
                backgroundColor: selectedRole === r.id ? T.text1 : T.white,
                color: selectedRole === r.id ? T.white : T.text3,
                boxShadow: selectedRole === r.id ? "none" : T.shadow }}>
              {r.name}
            </button>
          ))}
        </div>

        <div style={{ maxWidth: "768px", margin: "0 auto" }}>
          <div style={{ borderRadius: "16px", overflow: "hidden", backgroundColor: T.white, boxShadow: T.shadowMd }}>
            <div style={{ padding: "32px", borderBottom: `1px solid ${T.borderLight}` }}>
              <div style={{ display: "flex", alignItems: "center", gap: "12px", marginBottom: "8px" }}>
                <div style={{ width: "12px", height: "12px", borderRadius: "50%", backgroundColor: role.color }} />
                <h2 style={{ fontSize: "24px", fontWeight: 700, color: T.text1 }}>{role.name}</h2>
              </div>
              <p style={{ fontSize: "14px", color: T.text3 }}>{role.nameEn} — {role.desc}</p>
            </div>
            <div style={{ padding: "32px" }}>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: "16px", marginBottom: "32px" }}>
                {[
                  { label: "職責", value: detail.what, color: T.accent, bg: T.accentBg },
                  { label: "收益", value: detail.get, color: T.greenText, bg: T.greenBg },
                  { label: "風險 / 成本", value: detail.cost, color: T.goldText, bg: T.goldBg },
                ].map((box, i) => (
                  <div key={i} style={{ padding: "16px", borderRadius: "12px", backgroundColor: box.bg }}>
                    <p style={{ fontSize: "12px", fontWeight: 600, marginBottom: "8px", color: box.color }}>{box.label}</p>
                    <p style={{ fontSize: "14px", lineHeight: 1.5, color: T.text2 }}>{box.value}</p>
                  </div>
                ))}
              </div>
              <h3 style={{ fontSize: "14px", fontWeight: 600, marginBottom: "16px", color: T.text1 }}>經濟效益</h3>
              <div style={{ borderRadius: "12px", overflow: "hidden", border: `1px solid ${T.borderLight}` }}>
                <table style={{ width: "100%", borderCollapse: "collapse" }}>
                  <thead>
                    <tr style={{ backgroundColor: T.bgAlt }}>
                      <th style={{ textAlign: "left", padding: "16px", fontSize: "12px", fontWeight: 600, color: T.text4 }}>項目</th>
                      {(selectedRole === "supplier" || selectedRole === "trader") &&
                        <th style={{ textAlign: "right", padding: "16px", fontSize: "12px", fontWeight: 600, color: T.text4 }}>不參與 RWA</th>}
                      <th style={{ textAlign: "right", padding: "16px", fontSize: "12px", fontWeight: 600, color: T.text4 }}>
                        {selectedRole === "supplier" || selectedRole === "trader" ? "參與 RWA" : "金額 / 費率"}
                      </th>
                      <th style={{ textAlign: "right", padding: "16px", fontSize: "12px", fontWeight: 600, color: T.text4 }}>差異</th>
                    </tr>
                  </thead>
                  <tbody>
                    {detail.table.map((row, i) => (
                      <tr key={i} style={{ borderTop: `1px solid ${T.borderLight}` }}>
                        <td style={{ padding: "16px", fontSize: "14px", fontWeight: 500, color: T.text1 }}>{row.label}</td>
                        {(selectedRole === "supplier" || selectedRole === "trader") &&
                          <td style={{ padding: "16px", fontSize: "14px", textAlign: "right", color: T.text4 }}>{row.before}</td>}
                        <td style={{ padding: "16px", fontSize: "14px", fontWeight: 600, textAlign: "right", color: T.accent }}>{row.after}</td>
                        <td style={{ padding: "16px", fontSize: "14px", textAlign: "right", color: T.text3 }}>{row.diff}</td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

function App() {
  const [activePage, setActivePage] = useState("home");
  useEffect(() => { window.scrollTo({ top: 0, behavior: "smooth" }); }, [activePage]);

  return (
    <div style={{ minHeight: "100vh", backgroundColor: T.bg,
      fontFamily: "-apple-system, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Noto Sans TC', sans-serif",
      WebkitFontSmoothing: "antialiased", MozOsxFontSmoothing: "grayscale" }}>
      <Navigation activePage={activePage} setActivePage={setActivePage} />
      {activePage === "home" && <HomePage setActivePage={setActivePage} />}
      {activePage === "flow" && <FlowPage />}
      {activePage === "dashboard" && <DashboardPage />}
      {activePage === "risk" && <RiskPage />}
      {activePage === "roles" && <RolesPage />}
      <footer style={{ padding: "40px 0", borderTop: `1px solid ${T.borderLight}`, backgroundColor: T.bg }}>
        <div style={{ maxWidth: "1024px", margin: "0 auto", padding: "0 24px", textAlign: "center" }}>
          <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: "10px", marginBottom: "12px" }}>
            <div style={{ width: "24px", height: "24px", borderRadius: "6px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 700, fontSize: "11px", background: "linear-gradient(135deg, #1D1D1F, #424245)", color: T.white }}>R</div>
            <span style={{ fontSize: "14px", fontWeight: 500, color: T.text2 }}>RWA Supply Chain Finance</span>
          </div>
          <p style={{ fontSize: "12px", color: T.text5 }}>台灣出口供應鏈應收帳款融資 RWA 平台</p>
        </div>
      </footer>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById("root"));
</script>
</body>
</html>
